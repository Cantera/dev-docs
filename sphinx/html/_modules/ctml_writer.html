

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ctml_writer &mdash; Cantera 2.1.0b2 documentation</title>
    
    <link rel="stylesheet" href="../_static/site.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.0b2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cantera 2.1.0b2 documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" /> 
  </head>
  <body>
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
<a href="../index.html">
<img src="../_static/cantera-logo.png" border="0" alt="Cantera"/></a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">Cantera</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for ctml_writer</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>

<span class="c">##</span>
<span class="c"># @file ctml_writer.py</span>
<span class="c">#</span>
<span class="c"># Cantera .cti input file processor</span>
<span class="c"># @defgroup pygroup Cantera Python Interface</span>
<span class="c">#</span>
<span class="c"># The functions and classes in this module process Cantera .cti input</span>
<span class="c"># files and produce CTML files. It can be imported as a module, or used</span>
<span class="c"># as a script.</span>
<span class="c">#</span>
<span class="c"># script usage:</span>
<span class="c">#</span>
<span class="c"># python ctml_writer.py infile.cti</span>
<span class="c">#</span>
<span class="c"># This will produce CTML file &#39;infile.xml&#39;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="k">class</span> <span class="nc">CTI_Error</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exception raised if an error is encountered while</span>
<span class="sd">    parsing the input file.</span>
<span class="sd">    @ingroup pygroup&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n\n</span><span class="s">***** Error parsing input file *****</span><span class="se">\n\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>




<span class="n">indent</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&#39;</span><span class="p">,</span>
          <span class="s">&#39; &#39;</span><span class="p">,</span>
          <span class="s">&#39;  &#39;</span><span class="p">,</span>
          <span class="s">&#39;   &#39;</span><span class="p">,</span>
          <span class="s">&#39;    &#39;</span><span class="p">,</span>
          <span class="s">&#39;     &#39;</span><span class="p">,</span>
          <span class="s">&#39;      &#39;</span><span class="p">,</span>
          <span class="s">&#39;       &#39;</span><span class="p">,</span>
          <span class="s">&#39;        &#39;</span><span class="p">,</span>
          <span class="s">&#39;          &#39;</span><span class="p">,</span>
          <span class="s">&#39;           &#39;</span><span class="p">,</span>
          <span class="s">&#39;            &#39;</span><span class="p">,</span>
          <span class="s">&#39;             &#39;</span><span class="p">,</span>
          <span class="s">&#39;              &#39;</span><span class="p">,</span>
          <span class="s">&#39;               &#39;</span><span class="p">,</span>
          <span class="s">&#39;                &#39;</span><span class="p">]</span>

<span class="c">#-----------------------------------------------------</span>

<span class="k">class</span> <span class="nc">XMLnode</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This is a minimal class to allow easy creation of an XML tree</span>
<span class="sd">    from Python. It can write XML, but cannot read it.&quot;&quot;&quot;</span>

    <span class="n">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;_name&#39;</span><span class="p">,</span> <span class="s">&#39;_value&#39;</span><span class="p">,</span> <span class="s">&#39;_attribs&#39;</span><span class="p">,</span> <span class="s">&#39;_children&#39;</span><span class="p">,</span> <span class="s">&#39;_childmap&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;--&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Create a new node. Usually this only needs to be explicitly</span>
<span class="sd">        called to create the root element. Method addChild calls this</span>
<span class="sd">        constructor to create the new child node.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="c"># convert &#39;value&#39; to a string if it is not already, and</span>
        <span class="c"># strip leading whitespace</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_attribs</span> <span class="o">=</span> <span class="p">{}</span>    <span class="c"># dictionary of attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span> <span class="o">=</span> <span class="p">[]</span>   <span class="c"># list of child nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_childmap</span> <span class="o">=</span> <span class="p">{}</span>   <span class="c"># dictionary of child nodes</span>


    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The tag name of the node.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="k">def</span> <span class="nf">nChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Number of child elements.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addChild</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a child with tag &#39;name&#39;, and set its value if the value</span>
<span class="sd">        parameter is supplied.&quot;&quot;&quot;</span>

        <span class="c"># create a new node for the child</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">XMLnode</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">)</span>

        <span class="c"># add it to the list of children, and to the dictionary</span>
        <span class="c"># of children</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_childmap</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
        <span class="k">return</span> <span class="n">c</span>

    <span class="k">def</span> <span class="nf">addComment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a comment.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;_comment_&#39;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A string containing the element value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>

    <span class="k">def</span> <span class="nf">child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The child node with specified name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_childmap</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; An iterator over the child nodes &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">c</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an attribute using the syntax node[key]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attribs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set a new attribute using the syntax node[key] = value.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attribs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Allows getting the value using the syntax &#39;node()&#39;&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>

    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write out the XML tree to a file.&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;&lt;?xml version=&quot;1.0&quot;?&gt;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">write_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span><span class="n">indent</span><span class="p">[</span><span class="n">level</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;&lt;!--&#39;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39; &#39;</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">+</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39; &#39;</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">+</span><span class="s">&#39; &#39;</span>
        <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="o">+</span><span class="s">&#39;--&gt;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_attribs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attribs</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="o">+</span><span class="n">a</span><span class="o">+</span><span class="s">&#39;=&quot;&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_attribs</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;&quot;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
        <span class="n">indnt</span> <span class="o">=</span> <span class="n">indent</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
        <span class="n">vv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
        <span class="n">ieol</span> <span class="o">=</span> <span class="n">vv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ieol</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">ieol</span> <span class="o">=</span> <span class="n">vv</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ieol</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">  &#39;</span><span class="p">,</span> <span class="n">indnt</span><span class="p">,</span> <span class="n">vv</span><span class="p">[:</span><span class="n">ieol</span><span class="p">]))</span>
                    <span class="n">vv</span> <span class="o">=</span> <span class="n">vv</span><span class="p">[</span><span class="n">ieol</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">  &#39;</span><span class="p">,</span><span class="n">indnt</span><span class="p">,</span><span class="n">vv</span><span class="p">))</span>
                    <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal method used to write the XML representation of each node.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># handle comments</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="s">&#39;_comment_&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_comment</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">indnt</span> <span class="o">=</span> <span class="n">indent</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>

        <span class="c"># write the opening tag and attributes</span>
        <span class="n">s</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">indnt</span><span class="p">,</span> <span class="s">&#39;&lt;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_attribs</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/&gt;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;&gt;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write_value</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
                <span class="n">c</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">level</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_children</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">indnt</span><span class="p">))</span>
            <span class="n">s</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="s">&#39;&lt;/&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">,</span> <span class="s">&#39;&gt;&#39;</span><span class="p">))</span>

<span class="c">#--------------------------------------------------</span>

<span class="c"># constants that can be used in .cti files</span>
<span class="n">OneAtm</span> <span class="o">=</span> <span class="mf">1.01325e5</span>
<span class="n">OneBar</span> <span class="o">=</span> <span class="mf">1.0e5</span>
<span class="c"># Conversion from eV to J/kmol (electronCharge * Navrog)</span>
<span class="n">eV</span> <span class="o">=</span> <span class="mf">9.64853364595687e7</span>
<span class="c"># Electron Mass in kg</span>
<span class="n">ElectronMass</span> <span class="o">=</span> <span class="mf">9.10938291e-31</span>

<span class="kn">import</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">copy</span>

<span class="c"># default units</span>
<span class="n">_ulen</span> <span class="o">=</span> <span class="s">&#39;m&#39;</span>
<span class="n">_umol</span> <span class="o">=</span> <span class="s">&#39;kmol&#39;</span>
<span class="n">_umass</span> <span class="o">=</span> <span class="s">&#39;kg&#39;</span>
<span class="n">_utime</span> <span class="o">=</span> <span class="s">&#39;s&#39;</span>
<span class="n">_ue</span> <span class="o">=</span> <span class="s">&#39;J/kmol&#39;</span>
<span class="n">_uenergy</span> <span class="o">=</span> <span class="s">&#39;J&#39;</span>
<span class="n">_upres</span> <span class="o">=</span> <span class="s">&#39;Pa&#39;</span>

<span class="c"># used to convert reaction pre-exponentials</span>
<span class="n">_length</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;cm&#39;</span><span class="p">:</span><span class="mf">0.01</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;mm&#39;</span><span class="p">:</span><span class="mf">0.001</span><span class="p">}</span>
<span class="n">_moles</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;kmol&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;mol&#39;</span><span class="p">:</span><span class="mf">0.001</span><span class="p">,</span> <span class="s">&#39;molec&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">6.02214129e26</span><span class="p">}</span>
<span class="n">_time</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;s&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span> <span class="s">&#39;min&#39;</span><span class="p">:</span><span class="mf">60.0</span><span class="p">,</span> <span class="s">&#39;hr&#39;</span><span class="p">:</span><span class="mf">3600.0</span><span class="p">}</span>

<span class="c"># default std state pressure</span>
<span class="n">_pref</span> <span class="o">=</span> <span class="mf">1.0e5</span>    <span class="c"># 1 bar</span>

<span class="n">_name</span> <span class="o">=</span> <span class="s">&#39;noname&#39;</span>

<span class="c"># these lists store top-level entries</span>
<span class="n">_elements</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_species</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_speciesnames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_phases</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_reactions</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">_atw</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">_enames</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">_valsp</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">_valrxn</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">_valexport</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">_valfmt</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="k">def</span> <span class="nf">export_species</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;CSV&#39;</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">_valexport</span>
    <span class="k">global</span> <span class="n">_valfmt</span>
    <span class="n">_valexport</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="n">_valfmt</span> <span class="o">=</span> <span class="n">fmt</span>

<span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="n">species</span> <span class="o">=</span> <span class="s">&#39;yes&#39;</span><span class="p">,</span> <span class="n">reactions</span> <span class="o">=</span> <span class="s">&#39;yes&#39;</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">_valsp</span>
    <span class="k">global</span> <span class="n">_valrxn</span>
    <span class="n">_valsp</span> <span class="o">=</span> <span class="n">species</span>
    <span class="n">_valrxn</span> <span class="o">=</span> <span class="n">reactions</span>

<span class="k">def</span> <span class="nf">isnum</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;True if a is an integer or floating-point number.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">is_local_species</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;true if the species named &#39;name&#39; is defined in this file&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_speciesnames</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">dataset</span><span class="p">(</span><span class="n">nm</span><span class="p">):</span>
    <span class="s">&quot;Set the dataset name. Invoke this to change the name of the xml file.&quot;</span>
    <span class="k">global</span> <span class="n">_name</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="n">nm</span>

<span class="k">def</span> <span class="nf">standard_pressure</span><span class="p">(</span><span class="n">p0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the default standard-state pressure.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_pref</span>
    <span class="n">_pref</span> <span class="o">=</span> <span class="n">p0</span>

<div class="viewcode-block" id="units"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.units">[docs]</a><span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="n">length</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">quantity</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">mass</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
          <span class="n">act_energy</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">energy</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">pressure</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the default units.</span>

<span class="sd">    :param length:</span>
<span class="sd">        The default units for length. Default: ``&#39;m&#39;``</span>
<span class="sd">    :param mass:</span>
<span class="sd">        The default units for mass. Default: ``&#39;kg&#39;``</span>
<span class="sd">    :param quantity:</span>
<span class="sd">        The default units to specify number of molecules. Default: ``&#39;kmol&#39;``</span>
<span class="sd">    :param time:</span>
<span class="sd">        The default units for time. Default: ``&#39;s&#39;``</span>
<span class="sd">    :param energy:</span>
<span class="sd">        The default units for energies. Default: ``&#39;J&#39;``</span>
<span class="sd">    :param act_energy:</span>
<span class="sd">        The default units for activation energies. Default: ``&#39;K&#39;``</span>
<span class="sd">    :param pressure:</span>
<span class="sd">        The default units for pressure. Default: ``&#39;Pa&#39;``</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_ulen</span><span class="p">,</span> <span class="n">_umol</span><span class="p">,</span> <span class="n">_ue</span><span class="p">,</span> <span class="n">_utime</span><span class="p">,</span> <span class="n">_umass</span><span class="p">,</span> <span class="n">_uenergy</span><span class="p">,</span> <span class="n">_upres</span>
    <span class="k">if</span> <span class="n">length</span><span class="p">:</span> <span class="n">_ulen</span> <span class="o">=</span> <span class="n">length</span>
    <span class="k">if</span> <span class="n">quantity</span><span class="p">:</span> <span class="n">_umol</span> <span class="o">=</span> <span class="n">quantity</span>
    <span class="k">if</span> <span class="n">act_energy</span><span class="p">:</span> <span class="n">_ue</span> <span class="o">=</span> <span class="n">act_energy</span>
    <span class="k">if</span> <span class="n">time</span><span class="p">:</span> <span class="n">_utime</span> <span class="o">=</span> <span class="n">time</span>
    <span class="k">if</span> <span class="n">mass</span><span class="p">:</span> <span class="n">_umass</span> <span class="o">=</span> <span class="n">mass</span>
    <span class="k">if</span> <span class="n">energy</span><span class="p">:</span> <span class="n">_uenergy</span> <span class="o">=</span> <span class="n">energy</span>
    <span class="k">if</span> <span class="n">pressure</span><span class="p">:</span> <span class="n">_upres</span> <span class="o">=</span> <span class="n">pressure</span>
</div>
<span class="k">def</span> <span class="nf">ufmt</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;return a string representing a unit to a power n.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;-&#39;</span><span class="o">+</span><span class="n">base</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">base</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;-&#39;</span><span class="o">+</span><span class="n">base</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">base</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">outName</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;write the CTML file.&quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">XMLnode</span><span class="p">(</span><span class="s">&quot;ctml&quot;</span><span class="p">)</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;validate&quot;</span><span class="p">)</span>
    <span class="n">v</span><span class="p">[</span><span class="s">&quot;species&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_valsp</span>
    <span class="n">v</span><span class="p">[</span><span class="s">&quot;reactions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_valrxn</span>

    <span class="k">if</span> <span class="n">_elements</span><span class="p">:</span>
        <span class="n">ed</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;elementData&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">_elements</span><span class="p">:</span>
            <span class="n">e</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">ed</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ph</span> <span class="ow">in</span> <span class="n">_phases</span><span class="p">:</span>
        <span class="n">ph</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">species_set</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="n">_name</span><span class="p">,</span> <span class="n">species</span> <span class="o">=</span> <span class="n">_species</span><span class="p">)</span>
    <span class="n">s</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;reactionData&#39;</span><span class="p">)</span>
    <span class="n">r</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;reaction_data&#39;</span>
    <span class="k">for</span> <span class="n">rx</span> <span class="ow">in</span> <span class="n">_reactions</span><span class="p">:</span>
        <span class="n">rx</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">outName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outName</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">_name</span> <span class="o">!=</span> <span class="s">&#39;noname&#39;</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">_name</span><span class="o">+</span><span class="s">&#39;.xml&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">_valexport</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">_valexport</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">_species</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">_valfmt</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">addFloat</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">nm</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">defunits</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a child element to XML element x representing a</span>
<span class="sd">    floating-point number.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">u</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">isnum</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
        <span class="n">fval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fmt</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">fmt</span> <span class="o">%</span> <span class="n">fval</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">fval</span><span class="p">)</span>
        <span class="n">xc</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">nm</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">defunits</span><span class="p">:</span>
            <span class="n">xc</span><span class="p">[</span><span class="s">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">defunits</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fmt</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">fmt</span> <span class="o">%</span> <span class="n">v</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">xc</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="n">nm</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">xc</span><span class="p">[</span><span class="s">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">u</span>


<span class="k">def</span> <span class="nf">getAtomicComp</span><span class="p">(</span><span class="n">atoms</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">atoms</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span> <span class="k">return</span> <span class="n">atoms</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">atoms</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span>
    <span class="n">toks</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">toks</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
        <span class="n">d</span><span class="p">[</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">d</span>

<span class="k">def</span> <span class="nf">getReactionSpecies</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Take a reaction string and return a</span>
<span class="sd">    dictionary mapping species names to stoichiometric</span>
<span class="sd">    coefficients. If any species appears more than once,</span>
<span class="sd">    the returned stoichiometric coefficient is the sum.</span>
<span class="sd">    &gt;&gt;&gt; s = &#39;CH3 + 3 H + 5.2 O2 + 0.7 H&#39;</span>
<span class="sd">    &gt;&gt;&gt; getReactionSpecies(s)</span>
<span class="sd">    &gt;&gt;&gt; {&#39;CH3&#39;:1, &#39;H&#39;:3.7, &#39;O2&#39;:5.2}</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># get rid of the &#39;+&#39; signs separating species. Only plus signs</span>
    <span class="c"># surrounded by spaces are replaced, so that plus signs may be</span>
    <span class="c"># used in species names (e.g. &#39;Ar3+&#39;)</span>
    <span class="n">toks</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; + &#39;</span><span class="p">,</span><span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">toks</span><span class="p">:</span>

        <span class="c"># try to convert the token to a number.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&quot;negative stoichiometric coefficient:&quot;</span>
                                <span class="o">+</span><span class="n">s</span><span class="p">)</span>

        <span class="c">#if t &gt; &#39;0&#39; and t &lt; &#39;9&#39;:</span>
        <span class="c">#    n = int(t)</span>
        <span class="c">#else:</span>

        <span class="c"># token isn&#39;t a number, so it must be a species name</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c"># already seen this token so increment its value by the last</span>
            <span class="c"># value of n</span>
            <span class="k">if</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+=</span> <span class="n">n</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># first time this token has been seen, so set its value to n</span>
                <span class="n">d</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span>

            <span class="c"># reset n to 1.0 for species that do not specify a stoichiometric</span>
            <span class="c"># coefficient</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">d</span>


<div class="viewcode-block" id="element"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.element">[docs]</a><span class="k">class</span> <span class="nc">element</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; An atomic element or isotope. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symbol</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">atomic_mass</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
                 <span class="n">atomic_number</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param symbol:</span>
<span class="sd">            The symbol for the element or isotope.</span>
<span class="sd">        :param atomic_mass:</span>
<span class="sd">            The atomic mass in amu.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sym</span> <span class="o">=</span> <span class="n">symbol</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_atw</span> <span class="o">=</span> <span class="n">atomic_mass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num</span> <span class="o">=</span> <span class="n">atomic_number</span>
        <span class="k">global</span> <span class="n">_elements</span>
        <span class="n">_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;element&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sym</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&quot;atomicWt&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_atw</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&quot;atomicNumber&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num</span><span class="p">)</span>

</div>
<span class="k">class</span> <span class="nc">species_set</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">species</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_s</span> <span class="o">=</span> <span class="n">species</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="c">#self.type = SPECIES_SET</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span><span class="s">&#39;     species definitions     &#39;</span><span class="p">)</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;speciesData&quot;</span><span class="p">)</span>
        <span class="n">sd</span><span class="p">[</span><span class="s">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;species_data&quot;</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_s</span><span class="p">:</span>
            <span class="c">#if s.type == SPECIES:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">sd</span><span class="p">)</span>
            <span class="c">#else:</span>
            <span class="c">#    raise &#39;wrong object type in species_set: &#39;+s.__class__</span>


<div class="viewcode-block" id="species"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.species">[docs]</a><span class="k">class</span> <span class="nc">species</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A constituent of a phase or interface.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;missing name!&#39;</span><span class="p">,</span>
                 <span class="n">atoms</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">note</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">thermo</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">charge</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span><span class="p">,</span>
                 <span class="n">size</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param name:</span>
<span class="sd">            The species name (or formula). The name may be arbitrarily long,</span>
<span class="sd">            although usually a relatively short, abbreviated name is most</span>
<span class="sd">            convenient. Required parameter.</span>
<span class="sd">        :param atoms:</span>
<span class="sd">            The atomic composition, specified by a string containing</span>
<span class="sd">            space-delimited &lt;element&gt;:&lt;atoms&gt; pairs. The number of atoms may be</span>
<span class="sd">            either an integer or a floating-point number.</span>
<span class="sd">        :param thermo:</span>
<span class="sd">            The parameterization to use to compute the reference-state</span>
<span class="sd">            thermodynamic properties. This must be one of the entry types</span>
<span class="sd">            described in :ref:`sec-thermo-models`. To specify multiple</span>
<span class="sd">            parameterizations, each for a different temperature range,</span>
<span class="sd">            group them in parentheses.</span>
<span class="sd">        :param transport:</span>
<span class="sd">            An entry specifying parameters to compute this species&#39;</span>
<span class="sd">            contribution to the transport properties. This must be one of the</span>
<span class="sd">            entry types described in :ref:`sec-species-transport-models`, and</span>
<span class="sd">            must be consistent with the transport model of the phase into which</span>
<span class="sd">            the species is imported. To specify parameters for multiple</span>
<span class="sd">            transport models, group the entries in parentheses.</span>
<span class="sd">        :param size:</span>
<span class="sd">            The species &quot;size&quot;. Currently used only for surface species,</span>
<span class="sd">            where it represents the number of sites occupied.</span>
<span class="sd">        :param charge:</span>
<span class="sd">            The charge, in multiples of :math:`|e|`. If not specified, the</span>
<span class="sd">            charge will be calculated from the number of &quot;atoms&quot; of element</span>
<span class="sd">            ``E``, which represents an electron.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span> <span class="o">=</span> <span class="n">getAtomicComp</span><span class="p">(</span><span class="n">atoms</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_comment</span> <span class="o">=</span> <span class="n">note</span>

        <span class="k">if</span> <span class="n">thermo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span> <span class="o">=</span> <span class="n">thermo</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span> <span class="o">=</span> <span class="n">const_cp</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="n">chrg</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_charge</span> <span class="o">=</span> <span class="n">charge</span>
        <span class="k">if</span> <span class="s">&#39;E&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="p">:</span>
            <span class="n">chrg</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="p">[</span><span class="s">&#39;E&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_charge</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">999</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_charge</span> <span class="o">!=</span> <span class="n">chrg</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;specified charge inconsistent with number of electrons&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_charge</span> <span class="o">=</span> <span class="n">chrg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">size</span>

        <span class="k">global</span> <span class="n">_species</span>
        <span class="k">global</span> <span class="n">_enames</span>
        <span class="n">_species</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">global</span> <span class="n">_speciesnames</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_speciesnames</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;species &#39;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">&#39; multiply defined.&#39;</span><span class="p">)</span>
        <span class="n">_speciesnames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">_enames</span><span class="p">[</span><span class="n">e</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;CSV&#39;</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">_enames</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s">&#39;CSV&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">_enames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="p">[</span><span class="n">e</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;0,&#39;</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">,</span> <span class="n">thermo</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nt</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">hdr</span> <span class="o">=</span> <span class="s">&#39;    species &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">+</span><span class="s">&#39;    &#39;</span>
        <span class="n">p</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span><span class="n">hdr</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;species&quot;</span><span class="p">)</span>
        <span class="n">s</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
        <span class="n">a</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">a</span> <span class="o">+=</span> <span class="n">e</span><span class="o">+</span><span class="s">&#39;:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_atoms</span><span class="p">[</span><span class="n">e</span><span class="p">])</span><span class="o">+</span><span class="s">&#39; &#39;</span>
        <span class="n">s</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;atomArray&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comment</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;note&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_comment</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_charge</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">999</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;charge&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_charge</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;size&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_size</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">,</span> <span class="n">thermo</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nt</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_thermo</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;transport&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_transport</span><span class="p">,</span> <span class="n">transport</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_transport</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nt</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_transport</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">thermo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for species standard-state thermodynamic properties.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;CSV&#39;</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="Mu0_table"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.Mu0_table">[docs]</a><span class="k">class</span> <span class="nc">Mu0_table</span><span class="p">(</span><span class="n">thermo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Properties are computed by specifying a table of standard</span>
<span class="sd">    chemical potentials vs. T.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Trange</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                 <span class="n">h298</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">mu0</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">p0</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">Trange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_h298</span> <span class="o">=</span> <span class="n">h298</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mu0</span> <span class="o">=</span> <span class="n">mu0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">=</span> <span class="n">p0</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;Mu0&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">_pref</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pref</span><span class="p">)</span>
        <span class="n">energy_units</span> <span class="o">=</span> <span class="n">_uenergy</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_umol</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&quot;H298&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h298</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">energy_units</span><span class="p">)</span>
        <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;numPoints&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mu0</span><span class="p">))</span>


        <span class="n">mustr</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">tstr</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mu0</span><span class="p">:</span>
            <span class="n">mu0</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tstr</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="n">t</span>
            <span class="n">mustr</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="n">mu0</span>
            <span class="n">col</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">tstr</span> <span class="o">=</span> <span class="n">tstr</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                <span class="n">mustr</span> <span class="o">=</span> <span class="n">mustr</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
                <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">u</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;floatArray&quot;</span><span class="p">,</span> <span class="n">mustr</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;numPoints&quot;</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Mu0Values&quot;</span>

        <span class="n">u</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;floatArray&quot;</span><span class="p">,</span> <span class="n">tstr</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;numPoints&quot;</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Mu0Temperatures&quot;</span>

</div>
<div class="viewcode-block" id="NASA"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.NASA">[docs]</a><span class="k">class</span> <span class="nc">NASA</span><span class="p">(</span><span class="n">thermo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The 7-coefficient NASA polynomial parameterization.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Trange</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">p0</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;</span>
<span class="sd">        :param Trange:</span>
<span class="sd">            The temperature range over which the parameterization is valid.</span>
<span class="sd">            This must be entered as a sequence of two temperature values.</span>
<span class="sd">            Required.</span>
<span class="sd">        :param coeffs:</span>
<span class="sd">            Array of seven coefficients :math:`(a_0, \ldots , a_6)`</span>
<span class="sd">        :param p0:</span>
<span class="sd">            The reference-state pressure, usually 1 atm or 1 bar. If omitted,</span>
<span class="sd">            the default value is used, which is set by the ``standard_pressure``</span>
<span class="sd">            directive.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">Trange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">=</span> <span class="n">p0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coeffs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;NASA coefficient list must have length = 7&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span> <span class="o">=</span> <span class="n">coeffs</span>


    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">&#39;CSV&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s">&#39;CSV&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;NASA,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;NASA&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c">#n[&#39;Tmid&#39;] = repr(self._t[1])</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">_pref</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pref</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
        <span class="c">#if i &gt; 0 and 3*((i+1)/3) == i: s += &#39;\n&#39;</span>
        <span class="c">#s = s[:-2]</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;floatArray&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;7&quot;</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;coeffs&quot;</span>

</div>
<div class="viewcode-block" id="NASA9"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.NASA9">[docs]</a><span class="k">class</span> <span class="nc">NASA9</span><span class="p">(</span><span class="n">thermo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;NASA9 polynomial parameterization for a single temperature region.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Trange</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                 <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">p0</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">Trange</span>         <span class="c"># Range of the polynomial representation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">=</span> <span class="n">p0</span>          <span class="c"># Reference pressure</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coeffs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">9</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;NASA9 coefficient list must have length = 9&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span> <span class="o">=</span> <span class="n">coeffs</span>


    <span class="k">def</span> <span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">&#39;CSV&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s">&#39;CSV&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;NASA9,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="s">&#39;,&#39;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;NASA9&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">_pref</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pref</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">,&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
                                                    <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;floatArray&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;9&quot;</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;coeffs&quot;</span>

</div>
<span class="k">class</span> <span class="nc">activityCoefficients</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">pureFluidParameters</span><span class="p">(</span><span class="n">activityCoefficients</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">species</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">a_coeff</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">b_coeff</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="n">species</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acoeff</span> <span class="o">=</span> <span class="n">a_coeff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bcoeff</span> <span class="o">=</span> <span class="n">b_coeff</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">):</span>
        <span class="n">f</span><span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;pureFluidParameters&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="p">[</span><span class="s">&#39;species&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%10.4E</span><span class="s">, </span><span class="si">%10.4E</span><span class="s"> </span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acoeff</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acoeff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">ac</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;a_coeff&quot;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
        <span class="n">ac</span><span class="p">[</span><span class="s">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_upres</span><span class="o">+</span><span class="s">&#39;-&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;6/&#39;</span><span class="o">+</span><span class="n">_umol</span><span class="o">+</span><span class="s">&#39;2&#39;</span>
        <span class="n">ac</span><span class="p">[</span><span class="s">&quot;model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;linear_a&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%0.2f</span><span class="s"> </span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bcoeff</span>
        <span class="n">bc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;b_coeff&quot;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
        <span class="n">bc</span><span class="p">[</span><span class="s">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3/&#39;</span><span class="o">+</span><span class="n">_umol</span>


<span class="k">class</span> <span class="nc">crossFluidParameters</span><span class="p">(</span><span class="n">activityCoefficients</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">species</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">a_coeff</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">b_coeff</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_species1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species2</span> <span class="o">=</span> <span class="n">species</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acoeff</span> <span class="o">=</span> <span class="n">a_coeff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bcoeff</span> <span class="o">=</span> <span class="n">b_coeff</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">):</span>
        <span class="n">f</span><span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;crossFluidParameters&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="p">[</span><span class="s">&quot;species2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species2</span>
        <span class="n">f</span><span class="p">[</span><span class="s">&quot;species1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species1</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%10.4E</span><span class="s">, </span><span class="si">%10.4E</span><span class="s"> </span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_acoeff</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acoeff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">ac</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;a_coeff&quot;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
        <span class="n">ac</span><span class="p">[</span><span class="s">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_upres</span><span class="o">+</span><span class="s">&#39;-&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;6/&#39;</span><span class="o">+</span><span class="n">_umol</span><span class="o">+</span><span class="s">&#39;2&#39;</span>
        <span class="n">ac</span><span class="p">[</span><span class="s">&quot;model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;linear_a&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bcoeff</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%0.2f</span><span class="s"> </span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bcoeff</span>
            <span class="n">bc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;b_coeff&quot;</span><span class="p">,</span><span class="n">s</span><span class="p">)</span>
            <span class="n">bc</span><span class="p">[</span><span class="s">&quot;units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3/&#39;</span><span class="o">+</span><span class="n">_umol</span>


<div class="viewcode-block" id="Shomate"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.Shomate">[docs]</a><span class="k">class</span> <span class="nc">Shomate</span><span class="p">(</span><span class="n">thermo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Shomate polynomial parameterization.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Trange</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">p0</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="sd">r&quot;&quot;&quot;</span>
<span class="sd">        :param Trange:</span>
<span class="sd">            The temperature range over which the parameterization is valid.</span>
<span class="sd">            This must be entered as a sequence of two temperature values.</span>
<span class="sd">            Required input.</span>
<span class="sd">        :param coeffs:</span>
<span class="sd">            Sequence of seven coefficients :math:`(A, \ldots ,G)`</span>
<span class="sd">        :param p0:</span>
<span class="sd">            The reference-state pressure, usually 1 atm or 1 bar. If omitted,</span>
<span class="sd">            the default value set by the ``standard_pressure`` directive is used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">Trange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">=</span> <span class="n">p0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">coeffs</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;Shomate coefficient list must have length = 7&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span> <span class="o">=</span> <span class="n">coeffs</span>


    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;Shomate&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">_pref</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pref</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">, </span><span class="si">%17.9E</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coeffs</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;floatArray&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;7&quot;</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;coeffs&quot;</span>

</div>
<div class="viewcode-block" id="Adsorbate"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.Adsorbate">[docs]</a><span class="k">class</span> <span class="nc">Adsorbate</span><span class="p">(</span><span class="n">thermo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Adsorbed species characterized by a binding energy and a set of</span>
<span class="sd">    vibrational frequencies.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Trange</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                 <span class="n">binding_energy</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">frequencies</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">p0</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">Trange</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">=</span> <span class="n">p0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span> <span class="o">=</span> <span class="n">frequencies</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_be</span> <span class="o">=</span> <span class="n">binding_energy</span>


    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;adsorbate&quot;</span><span class="p">)</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">n</span><span class="p">[</span><span class="s">&#39;Tmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pref</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">_pref</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span><span class="p">[</span><span class="s">&#39;P0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pref</span><span class="p">)</span>

        <span class="n">energy_units</span> <span class="o">=</span> <span class="n">_uenergy</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_umol</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="s">&#39;binding_energy&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_be</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">energy_units</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="n">nfreq</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="n">nfreq</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%17.9E</span><span class="s">, &#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freqs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;floatArray&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">nfreq</span><span class="p">)</span>
        <span class="n">u</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;freqs&quot;</span>


</div>
<div class="viewcode-block" id="const_cp"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.const_cp">[docs]</a><span class="k">class</span> <span class="nc">const_cp</span><span class="p">(</span><span class="n">thermo</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constant specific heat.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">t0</span> <span class="o">=</span> <span class="mf">298.15</span><span class="p">,</span> <span class="n">cp0</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">h0</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">s0</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">tmax</span> <span class="o">=</span> <span class="mf">5000.0</span><span class="p">,</span> <span class="n">tmin</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param t0:</span>
<span class="sd">            Temperature parameter T0. Default: 298.15 K.</span>
<span class="sd">        :param cp0:</span>
<span class="sd">            Reference-state molar heat capacity (constant). Default: 0.0.</span>
<span class="sd">        :param h0:</span>
<span class="sd">            Reference-state molar enthalpy at temperature T0. Default: 0.0.</span>
<span class="sd">        :param s0:</span>
<span class="sd">            Reference-state molar entropy at temperature T0. Default: 0.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="p">[</span><span class="n">tmin</span><span class="p">,</span> <span class="n">tmax</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="p">[</span><span class="n">t0</span><span class="p">,</span> <span class="n">h0</span><span class="p">,</span> <span class="n">s0</span><span class="p">,</span> <span class="n">cp0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="c">#t = self._build(p)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;const_cp&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span> <span class="n">c</span><span class="p">[</span><span class="s">&#39;Tmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span> <span class="n">c</span><span class="p">[</span><span class="s">&#39;Tmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">energy_units</span> <span class="o">=</span> <span class="n">_uenergy</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_umol</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s">&#39;t0&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">defunits</span> <span class="o">=</span> <span class="s">&#39;K&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s">&#39;h0&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">energy_units</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s">&#39;s0&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">energy_units</span><span class="o">+</span><span class="s">&#39;/K&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s">&#39;cp0&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">energy_units</span><span class="o">+</span><span class="s">&#39;/K&#39;</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">transport</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<div class="viewcode-block" id="gas_transport"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.gas_transport">[docs]</a><span class="k">class</span> <span class="nc">gas_transport</span><span class="p">(</span><span class="n">transport</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Species-specific Transport coefficients for ideal gas transport models.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom</span> <span class="o">=</span> <span class="s">&#39;nonlin&#39;</span><span class="p">,</span>
                 <span class="n">diam</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">well_depth</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">dipole</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">polar</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">rot_relax</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param geom:</span>
<span class="sd">            A string specifying the molecular geometry. One of ``atom``,</span>
<span class="sd">            ``linear``, or ``nonlin``. Required.</span>
<span class="sd">        :param diam:</span>
<span class="sd">            The Lennard-Jones collision diameter in Angstroms. Required.</span>
<span class="sd">        :param well_depth:</span>
<span class="sd">            The Lennard-Jones well depth in Kelvin. Required.</span>
<span class="sd">        :param dipole:</span>
<span class="sd">            The permanent dipole moment in Debye. Default: 0.0</span>
<span class="sd">        :param polar:</span>
<span class="sd">            The polarizability in A^3. Default: 0.0</span>
<span class="sd">        :param rot_relax:</span>
<span class="sd">            The rotational relaxation collision number at 298 K. Dimensionless.</span>
<span class="sd">            Default: 0.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_geom</span> <span class="o">=</span> <span class="n">geom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_diam</span> <span class="o">=</span> <span class="n">diam</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_well_depth</span> <span class="o">=</span> <span class="n">well_depth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dipole</span> <span class="o">=</span> <span class="n">dipole</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_polar</span> <span class="o">=</span> <span class="n">polar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rot_relax</span> <span class="o">=</span> <span class="n">rot_relax</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="c">#t = s.addChild(&quot;transport&quot;)</span>
        <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;gas_transport&#39;</span>
        <span class="c">#        t.addChild(&quot;geometry&quot;, self._geom)</span>
        <span class="n">tg</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;string&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_geom</span><span class="p">)</span>
        <span class="n">tg</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;geometry&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&quot;LJ_welldepth&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_well_depth</span><span class="p">,</span> <span class="s">&#39;K&#39;</span><span class="p">),</span> <span class="s">&#39;</span><span class="si">%8.3f</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&quot;LJ_diameter&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_diam</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">),</span><span class="s">&#39;</span><span class="si">%8.3f</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&quot;dipoleMoment&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dipole</span><span class="p">,</span> <span class="s">&#39;Debye&#39;</span><span class="p">),</span><span class="s">&#39;</span><span class="si">%8.3f</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&quot;polarizability&quot;</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_polar</span><span class="p">,</span> <span class="s">&#39;A3&#39;</span><span class="p">),</span><span class="s">&#39;</span><span class="si">%8.3f</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&quot;rotRelax&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rot_relax</span><span class="p">,</span><span class="s">&#39;</span><span class="si">%8.3f</span><span class="s">&#39;</span><span class="p">)</span>
</div>
<span class="k">class</span> <span class="nc">rate_expression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<div class="viewcode-block" id="Arrhenius"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.Arrhenius">[docs]</a><span class="k">class</span> <span class="nc">Arrhenius</span><span class="p">(</span><span class="n">rate_expression</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">A</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">n</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">E</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">coverage</span> <span class="o">=</span> <span class="p">[],</span>
                 <span class="n">rate_type</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param A:</span>
<span class="sd">            The pre-exponential coefficient. Required input. If entered without</span>
<span class="sd">            units, the units will be computed considering all factors that</span>
<span class="sd">            affect the units. The resulting units string is written to the CTML</span>
<span class="sd">            file individually for each reaction pre-exponential coefficient.</span>
<span class="sd">        :param n:</span>
<span class="sd">            The temperature exponent. Dimensionless. Default: 0.0.</span>
<span class="sd">        :param E:</span>
<span class="sd">            Activation energy. Default: 0.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">E</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">rate_type</span>

        <span class="k">if</span> <span class="n">coverage</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coverage</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cov</span> <span class="o">=</span> <span class="p">[</span><span class="n">coverage</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cov</span> <span class="o">=</span> <span class="n">coverage</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cov</span> <span class="o">=</span> <span class="bp">None</span>


    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">units_factor</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
              <span class="n">gas_species</span> <span class="o">=</span> <span class="p">[],</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">rxn_phase</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;Arrhenius&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>

        <span class="c"># check for sticking probability</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">:</span>
            <span class="n">a</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;stick&#39;</span><span class="p">:</span>
                <span class="n">ngas</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gas_species</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ngas</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">Sticking probabilities can only be used for reactions with one gas-phase</span>
<span class="s">reactant, but this reaction has &quot;&quot;&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ngas</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">gas_species</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">a</span><span class="p">[</span><span class="s">&#39;species&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gas_species</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">units_factor</span> <span class="o">=</span> <span class="mf">1.0</span>


        <span class="c"># if a pure number is entered for A, multiply by the conversion</span>
        <span class="c"># factor to SI and write it to CTML as a pure number. Otherwise,</span>
        <span class="c"># pass it as-is through to CTML with the unit string.</span>
        <span class="k">if</span> <span class="n">isnum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">addFloat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">units_factor</span><span class="p">,</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%14.6E</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;/site&#39;</span><span class="p">:</span>
            <span class="n">addFloat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">rxn_phase</span><span class="o">.</span><span class="n">_sitedens</span><span class="p">,</span>
                     <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%14.6E</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">addFloat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%14.6E</span><span class="s">&#39;</span><span class="p">)</span>

        <span class="c"># The b coefficient should be dimensionless, so there is no</span>
        <span class="c"># need to use &#39;addFloat&#39;</span>
        <span class="n">a</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

        <span class="c"># If a pure number is entered for the activation energy,</span>
        <span class="c"># add the default units, otherwise use the supplied units.</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%f</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_ue</span><span class="p">)</span>

        <span class="c"># for surface reactions, a coverage dependence may be specified.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cov</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cov</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cov</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;coverage&#39;</span><span class="p">)</span>
                <span class="n">c</span><span class="p">[</span><span class="s">&#39;species&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cov</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">cov</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%f</span><span class="s">&#39;</span><span class="p">)</span>
                <span class="n">c</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">cov</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="n">cov</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">fmt</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%f</span><span class="s">&#39;</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_ue</span><span class="p">)</span>
</div>
<span class="k">def</span> <span class="nf">stick</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">E</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">coverage</span> <span class="o">=</span> <span class="p">[]):</span>
    <span class="k">return</span> <span class="n">Arrhenius</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">E</span> <span class="o">=</span> <span class="n">E</span><span class="p">,</span> <span class="n">coverage</span> <span class="o">=</span> <span class="n">coverage</span><span class="p">,</span> <span class="n">rate_type</span> <span class="o">=</span> <span class="s">&#39;stick&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">getPairs</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">toks</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">m</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">toks</span><span class="p">:</span>
        <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
        <span class="n">m</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">m</span>

<div class="viewcode-block" id="reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.reaction">[docs]</a><span class="k">class</span> <span class="nc">reaction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A homogeneous chemical reaction with pressure-independent rate coefficient</span>
<span class="sd">    and mass-action kinetics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">equation</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">kf</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="nb">id</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">order</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param equation:</span>
<span class="sd">            A string specifying the chemical equation.</span>
<span class="sd">        :param rate_coeff:</span>
<span class="sd">            The rate coefficient for the forward direction. If a sequence of</span>
<span class="sd">            three numbers is given, these will be interpreted as [A, n,E] in</span>
<span class="sd">            the modified Arrhenius function :math:`A T^n exp(-E/\hat{R}T)`.</span>
<span class="sd">        :param id:</span>
<span class="sd">            An optional identification string. If omitted, it defaults to a</span>
<span class="sd">            four-digit numeric string beginning with 0001 for the first</span>
<span class="sd">            reaction in the file.</span>
<span class="sd">        :param options:</span>
<span class="sd">            Processing options, as described in :ref:`sec-phase-options`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_e</span> <span class="o">=</span> <span class="n">equation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_order</span> <span class="o">=</span> <span class="n">order</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="n">options</span>
        <span class="k">global</span> <span class="n">_reactions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">_reactions</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">r</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;&lt;=&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;=&gt;&#39;</span><span class="p">,</span> <span class="s">&#39;=&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_e</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">r</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_e</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;&lt;=&gt;&#39;</span><span class="p">,</span><span class="s">&#39;=&#39;</span><span class="p">]:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rev</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rev</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_r</span> <span class="o">=</span> <span class="n">getReactionSpecies</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_p</span> <span class="o">=</span> <span class="n">getReactionSpecies</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rxnorder</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="n">getPairs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">order</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">o</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rxnorder</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rxnorder</span><span class="p">[</span><span class="n">o</span><span class="p">]</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="n">o</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&quot;order specified for non-reactant: &quot;</span><span class="o">+</span><span class="n">o</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span> <span class="o">=</span> <span class="n">kf</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_igspecies</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dims</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rxnphase</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">_reactions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="reaction.unit_factor"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.reaction.unit_factor">[docs]</a>    <span class="k">def</span> <span class="nf">unit_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Conversion factor from given rate constant units to the MKS (+kmol)</span>
<span class="sd">        used internally by Cantera, taking into account the reaction order.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">_length</span><span class="p">[</span><span class="n">_ulen</span><span class="p">],</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ldim</span><span class="p">)</span> <span class="o">*</span>
                <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">_moles</span><span class="p">[</span><span class="n">_umol</span><span class="p">],</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">mdim</span><span class="p">)</span> <span class="o">/</span> <span class="n">_time</span><span class="p">[</span><span class="n">_utime</span><span class="p">])</span>
</div>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%04i</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">rxnph</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">:</span>
            <span class="n">ns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rxnorder</span><span class="p">[</span><span class="n">s</span><span class="p">]</span>
            <span class="n">nm</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>
            <span class="n">nl</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>

            <span class="n">mindim</span> <span class="o">=</span> <span class="mi">4</span>
            <span class="k">for</span> <span class="n">ph</span> <span class="ow">in</span> <span class="n">_phases</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">ph</span><span class="o">.</span><span class="n">has_species</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
                    <span class="n">nm</span><span class="p">,</span> <span class="n">nl</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">conc_dim</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">ph</span><span class="o">.</span><span class="n">is_ideal_gas</span><span class="p">():</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_igspecies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">ph</span> <span class="ow">in</span> <span class="n">rxnph</span><span class="p">:</span>
                        <span class="n">rxnph</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ph</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_dims</span><span class="p">[</span><span class="n">ph</span><span class="o">.</span><span class="n">_dim</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">ph</span><span class="o">.</span><span class="n">_dim</span> <span class="o">&lt;</span> <span class="n">mindim</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_rxnphase</span> <span class="o">=</span> <span class="n">ph</span>
                            <span class="n">mindim</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">_dim</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">nm</span> <span class="o">==</span> <span class="o">-</span><span class="mi">999</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&quot;species &quot;</span><span class="o">+</span><span class="n">s</span><span class="o">+</span><span class="s">&quot; not found&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">+=</span> <span class="n">nm</span><span class="o">*</span><span class="n">ns</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">+=</span> <span class="n">nl</span><span class="o">*</span><span class="n">ns</span>

        <span class="n">p</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span><span class="s">&quot;   reaction &quot;</span><span class="o">+</span><span class="nb">id</span><span class="o">+</span><span class="s">&quot;    &quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;reaction&#39;</span><span class="p">)</span>
        <span class="n">r</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rev</span><span class="p">:</span>
            <span class="n">r</span><span class="p">[</span><span class="s">&#39;reversible&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;yes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span><span class="p">[</span><span class="s">&#39;reversible&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;no&#39;</span>

        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="s">&#39;duplicate&#39;</span><span class="p">:</span>
                <span class="n">r</span><span class="p">[</span><span class="s">&#39;duplicate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;yes&#39;</span>
            <span class="k">elif</span> <span class="n">s</span> <span class="o">==</span> <span class="s">&#39;negative_A&#39;</span><span class="p">:</span>
                <span class="n">r</span><span class="p">[</span><span class="s">&#39;negative_A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;yes&#39;</span>

        <span class="n">ee</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_e</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&lt;&#39;</span><span class="p">,</span><span class="s">&#39;[&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;&gt;&#39;</span><span class="p">,</span><span class="s">&#39;]&#39;</span><span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;equation&#39;</span><span class="p">,</span><span class="n">ee</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_order</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">osp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rxnorder</span><span class="p">:</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;order&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_rxnorder</span><span class="p">[</span><span class="n">osp</span><span class="p">])</span>
                <span class="n">o</span><span class="p">[</span><span class="s">&#39;species&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">osp</span>


        <span class="c"># adjust the moles and length powers based on the dimensions of</span>
        <span class="c"># the rate of progress (moles/length^2 or moles/length^3)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;surface&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">+=</span> <span class="mi">2</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dims</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_e</span> <span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">A surface reaction may contain at most &#39;</span><span class="o">+</span>
                                   <span class="s">&#39;one surface phase.&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;edge&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dims</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_e</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">An edge reaction may contain at most &#39;</span><span class="o">+</span>
                                   <span class="s">&#39;one edge phase.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">+=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">+=</span> <span class="mi">3</span>

        <span class="c"># add the reaction type as an attribute if it has been specified.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">:</span>
            <span class="n">r</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>

        <span class="c"># The default rate coefficient type is Arrhenius. If the rate</span>
        <span class="c"># coefficient has been specified as a sequence of three</span>
        <span class="c"># numbers, then create a new Arrhenius instance for it;</span>
        <span class="c"># otherwise, just use the supplied instance.</span>
        <span class="n">nm</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">kfnode</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;rateCoeff&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_kf</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;surface&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_kf</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;edge&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_kf</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;threeBody&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_kf</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">-=</span> <span class="mi">3</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;chebyshev&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;edge&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_beta</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">electro</span> <span class="o">=</span> <span class="n">kfnode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;electrochem&#39;</span><span class="p">)</span>
                <span class="n">electro</span><span class="p">[</span><span class="s">&#39;beta&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_beta</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">kf</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kf</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kf</span><span class="p">,</span> <span class="n">rate_expression</span><span class="p">):</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">kf</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">k</span> <span class="o">=</span> <span class="n">Arrhenius</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">kf</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">n</span> <span class="o">=</span> <span class="n">kf</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">E</span> <span class="o">=</span> <span class="n">kf</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">k</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">kfnode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_factor</span><span class="p">(),</span> <span class="n">gas_species</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_igspecies</span><span class="p">,</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">nm</span><span class="p">,</span> <span class="n">rxn_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rxnphase</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;falloff&#39;</span><span class="p">:</span>
                <span class="c"># set values for low-pressure rate coeff if falloff rxn</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">-=</span> <span class="mi">3</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s">&#39;k0&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s">&#39;chemAct&#39;</span><span class="p">:</span>
                <span class="c"># set values for high-pressure rate coeff if this is a</span>
                <span class="c"># chemically activated reaction</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mdim</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ldim</span> <span class="o">+=</span> <span class="mi">3</span>
                <span class="n">nm</span> <span class="o">=</span> <span class="s">&#39;kHigh&#39;</span>

        <span class="n">rstr</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">pstr</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">r</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;reactants&#39;</span><span class="p">,</span><span class="n">rstr</span><span class="p">)</span>
        <span class="n">r</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;products&#39;</span><span class="p">,</span> <span class="n">pstr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">r</span>

<span class="c">#-------------------</span>

</div>
<div class="viewcode-block" id="three_body_reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.three_body_reaction">[docs]</a><span class="k">class</span> <span class="nc">three_body_reaction</span><span class="p">(</span><span class="n">reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A three-body reaction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">equation</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">kf</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">efficiencies</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="nb">id</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
                 <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param equation:</span>
<span class="sd">            A string specifying the chemical equation. The reaction can be</span>
<span class="sd">            written in either the association or dissociation directions, and</span>
<span class="sd">            may be reversible or irreversible.</span>
<span class="sd">        :param rate_coeff:</span>
<span class="sd">            The rate coefficient for the forward direction. If a sequence of</span>
<span class="sd">            three numbers is given, these will be interpreted as [A,n,E] in</span>
<span class="sd">            the modified Arrhenius function.</span>
<span class="sd">        :param efficiencies:</span>
<span class="sd">            A string specifying the third-body collision efficiencies.</span>
<span class="sd">            The efficiencies for unspecified species are set to 1.0.</span>
<span class="sd">        :param id:</span>
<span class="sd">            An optional identification string. If omitted, it defaults to a</span>
<span class="sd">            four-digit numeric string beginning with 0001 for the first</span>
<span class="sd">            reaction in the file.</span>
<span class="sd">        :param options:</span>
<span class="sd">            Processing options, as described in :ref:`sec-phase-options`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="n">kf</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;threeBody&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_effm</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span> <span class="o">=</span> <span class="n">efficiencies</span>

        <span class="c"># clean up reactant and product lists</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="s">&#39;M&#39;</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">==</span> <span class="s">&#39;m&#39;</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">p</span> <span class="o">==</span> <span class="s">&#39;M&#39;</span> <span class="ow">or</span> <span class="n">p</span> <span class="o">==</span> <span class="s">&#39;m&#39;</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="n">p</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">kfnode</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s">&#39;rateCoeff&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span><span class="p">:</span>
            <span class="n">eff</span> <span class="o">=</span> <span class="n">kfnode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;efficiencies&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_eff</span><span class="p">)</span>
            <span class="n">eff</span><span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_effm</span><span class="p">)</span>

</div>
<span class="k">class</span> <span class="nc">pdep_reaction</span><span class="p">(</span><span class="n">reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Base class for falloff_reaction and chemically_activated_reaction &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">clean_up_reactants_products</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="s">&#39;(+&#39;</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="s">&#39;(+&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s">&#39;M)&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="s">&#39;M)&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="s">&#39;M)&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s">&#39;m)&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="s">&#39;m)&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="s">&#39;m)&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;)&#39;</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;(&#39;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">species</span> <span class="o">=</span> <span class="n">r</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;(+ &#39;</span><span class="o">+</span><span class="n">species</span><span class="o">+</span><span class="s">&#39;) and &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_eff</span><span class="o">+</span><span class="s">&#39; cannot both be specified&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span> <span class="o">=</span> <span class="n">species</span><span class="o">+</span><span class="s">&#39;:1.0&#39;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_effm</span> <span class="o">=</span> <span class="mf">0.0</span>

                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span>
        <span class="n">kfnode</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s">&#39;rateCoeff&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effm</span> <span class="o">&gt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">eff</span> <span class="o">=</span> <span class="n">kfnode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;efficiencies&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_eff</span><span class="p">)</span>
            <span class="n">eff</span><span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_effm</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">kfnode</span><span class="p">)</span>


<div class="viewcode-block" id="falloff_reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.falloff_reaction">[docs]</a><span class="k">class</span> <span class="nc">falloff_reaction</span><span class="p">(</span><span class="n">pdep_reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A gas-phase falloff reaction. &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="n">kf0</span><span class="p">,</span> <span class="n">kf</span><span class="p">,</span>
                 <span class="n">efficiencies</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">falloff</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param equation:</span>
<span class="sd">            A string specifying the chemical equation.</span>
<span class="sd">        :param rate_coeff_inf:</span>
<span class="sd">            The rate coefficient for the forward direction in the high-pressure</span>
<span class="sd">            limit. If a sequence of three numbers is given, these will be</span>
<span class="sd">            interpreted as [A, n,E] in the modified Arrhenius function.</span>
<span class="sd">        :param rate_coeff_0:</span>
<span class="sd">            The rate coefficient for the forward direction in the low-pressure</span>
<span class="sd">            limit. If a sequence of three numbers is given, these will be</span>
<span class="sd">            interpreted as [A, n,E] in the modified Arrhenius function.</span>
<span class="sd">        :param efficiencies:</span>
<span class="sd">            A string specifying the third-body collision efficiencies. The</span>
<span class="sd">            efficiency for unspecified species is set to 1.0.</span>
<span class="sd">        :param falloff:</span>
<span class="sd">            An embedded entry specifying a falloff function. If omitted, a</span>
<span class="sd">            unity falloff function (Lindemann form) will be used.</span>
<span class="sd">        :param id:</span>
<span class="sd">            An optional identification string. If omitted, it defaults to a</span>
<span class="sd">            four-digit numeric string beginning with 0001 for the first</span>
<span class="sd">            reaction in the file.</span>
<span class="sd">        :param options:</span>
<span class="sd">            Processing options, as described in :ref:`sec-phase-options`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">kf2</span> <span class="o">=</span> <span class="p">(</span><span class="n">kf</span><span class="p">,</span> <span class="n">kf0</span><span class="p">)</span>
        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="n">kf2</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;falloff&#39;</span>
        <span class="c"># use a Lindemann falloff function by default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span> <span class="o">=</span> <span class="n">falloff</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span> <span class="o">=</span> <span class="n">Lindemann</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_effm</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span> <span class="o">=</span> <span class="n">efficiencies</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clean_up_reactants_products</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="chemically_activated_reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.chemically_activated_reaction">[docs]</a><span class="k">class</span> <span class="nc">chemically_activated_reaction</span><span class="p">(</span><span class="n">pdep_reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; A gas-phase, chemically activated reaction. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="n">kLow</span><span class="p">,</span> <span class="n">kHigh</span><span class="p">,</span>
                 <span class="n">efficiencies</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">falloff</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param equation:</span>
<span class="sd">            A string specifying the chemical equation.</span>
<span class="sd">        :param kLow:</span>
<span class="sd">            The rate coefficient for the forward direction in the low-pressure</span>
<span class="sd">            limit. If a sequence of three numbers is given, these will be</span>
<span class="sd">            interpreted as [A, n,E] in the modified Arrhenius function.</span>
<span class="sd">        :param kHigh:</span>
<span class="sd">            The rate coefficient for the forward direction in the high-pressure</span>
<span class="sd">            limit. If a sequence of three numbers is given, these will be</span>
<span class="sd">            interpreted as [A, n,E] in the modified Arrhenius function.</span>
<span class="sd">        :param efficiencies:</span>
<span class="sd">            A string specifying the third-body collision efficiencies. The</span>
<span class="sd">            efficiency for unspecified species is set to 1.0.</span>
<span class="sd">        :param falloff:</span>
<span class="sd">            An embedded entry specifying a falloff function. If omitted, a</span>
<span class="sd">            unity falloff function (Lindemann form) will be used.</span>
<span class="sd">        :param id:</span>
<span class="sd">            An optional identification string. If omitted, it defaults to a</span>
<span class="sd">            four-digit numeric string beginning with 0001 for the first</span>
<span class="sd">            reaction in the file.</span>
<span class="sd">        :param options:</span>
<span class="sd">            Processing options, as described in :ref:`sec-phase-options`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="p">(</span><span class="n">kLow</span><span class="p">,</span> <span class="n">kHigh</span><span class="p">),</span> <span class="nb">id</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;chemAct&#39;</span>
        <span class="c"># use a Lindemann falloff function by default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span> <span class="o">=</span> <span class="n">falloff</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_falloff</span> <span class="o">=</span> <span class="n">Lindemann</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_effm</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eff</span> <span class="o">=</span> <span class="n">efficiencies</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clean_up_reactants_products</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="pdep_arrhenius"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.pdep_arrhenius">[docs]</a><span class="k">class</span> <span class="nc">pdep_arrhenius</span><span class="p">(</span><span class="n">reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pressure-dependent rate calculated by interpolating between Arrhenius</span>
<span class="sd">    expressions at different pressures.</span>

<span class="sd">    :param equation:</span>
<span class="sd">        A string specifying the chemical equation.</span>
<span class="sd">    :param args:</span>
<span class="sd">        Each additional argument is a sequence of four elements specifying the</span>
<span class="sd">        pressure and the Arrhenius parameters at that pressure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressures</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arrhenius</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">Ea</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pressures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">arrhenius</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">A</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">Ea</span><span class="p">))</span>

        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">arrhenius</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;plog&#39;</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">kfnode</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s">&#39;rateCoeff&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">kfnode</span><span class="o">.</span><span class="n">children</span><span class="p">()):</span>
            <span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;Arrhenius&#39;</span>
            <span class="n">addFloat</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressures</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

</div>
<div class="viewcode-block" id="chebyshev_reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.chebyshev_reaction">[docs]</a><span class="k">class</span> <span class="nc">chebyshev_reaction</span><span class="p">(</span><span class="n">reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pressure-dependent rate calculated in terms of a bivariate Chebyshev</span>
<span class="sd">    polynomial.</span>

<span class="sd">    :param equation:</span>
<span class="sd">        A string specifying the chemical equation.</span>
<span class="sd">    :param Tmin:</span>
<span class="sd">        The minimum temperature at which the rate expression is defined</span>
<span class="sd">    :param Tmax:</span>
<span class="sd">        the maximum temperature at which the rate expression is defined</span>
<span class="sd">    :param Pmin:</span>
<span class="sd">        The minimum pressure at which the rate expression is defined</span>
<span class="sd">    :param Pmax:</span>
<span class="sd">        The maximum pressure at which the rate expression is defined</span>
<span class="sd">    :param coeffs:</span>
<span class="sd">        A 2D array of the coefficients defining the rate expression. For a</span>
<span class="sd">        polynomial with M points in temperature and N points in pressure, this</span>
<span class="sd">        should be a list of M lists each with N elements.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">Tmin</span><span class="o">=</span><span class="mf">300.0</span><span class="p">,</span> <span class="n">Tmax</span><span class="o">=</span><span class="mf">2500.0</span><span class="p">,</span>
                 <span class="n">Pmin</span><span class="o">=</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="s">&#39;atm&#39;</span><span class="p">),</span> <span class="n">Pmax</span><span class="o">=</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="s">&#39;atm&#39;</span><span class="p">),</span>
                 <span class="n">coeffs</span><span class="o">=</span><span class="p">[[]],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;chebyshev&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pmin</span> <span class="o">=</span> <span class="n">Pmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pmax</span> <span class="o">=</span> <span class="n">Pmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tmin</span> <span class="o">=</span> <span class="n">Tmin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Tmax</span> <span class="o">=</span> <span class="n">Tmax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coeffs</span> <span class="o">=</span> <span class="n">coeffs</span>

        <span class="c"># clean up reactant and product lists</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="s">&#39;(+&#39;</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="s">&#39;(+&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s">&#39;M)&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="s">&#39;M)&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="s">&#39;M)&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s">&#39;m)&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r</span><span class="p">[</span><span class="s">&#39;m)&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">[</span><span class="s">&#39;m)&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">reaction</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">kfnode</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s">&#39;rateCoeff&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">kfnode</span><span class="p">,</span> <span class="s">&#39;Tmin&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tmin</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">kfnode</span><span class="p">,</span> <span class="s">&#39;Tmax&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Tmax</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">kfnode</span><span class="p">,</span> <span class="s">&#39;Pmin&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pmin</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">kfnode</span><span class="p">,</span> <span class="s">&#39;Pmax&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pmax</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unit_factor</span><span class="p">());</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">coeffs</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;{0:12.5e}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                                   <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">line</span><span class="p">))</span>

        <span class="n">coeffNode</span> <span class="o">=</span> <span class="n">kfnode</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;floatArray&#39;</span><span class="p">,</span> <span class="s">&#39;,</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
        <span class="n">coeffNode</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;coeffs&#39;</span>
        <span class="n">coeffNode</span><span class="p">[</span><span class="s">&#39;degreeT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coeffs</span><span class="p">))</span>
        <span class="n">coeffNode</span><span class="p">[</span><span class="s">&#39;degreeP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

</div>
<div class="viewcode-block" id="surface_reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.surface_reaction">[docs]</a><span class="k">class</span> <span class="nc">surface_reaction</span><span class="p">(</span><span class="n">reaction</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A heterogeneous chemical reaction with pressure-independent rate</span>
<span class="sd">    coefficient and mass-action kinetics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">kf</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param equation:</span>
<span class="sd">            A string specifying the chemical equation.</span>
<span class="sd">        :param rate_coeff:</span>
<span class="sd">            The rate coefficient for the forward direction. If a sequence of</span>
<span class="sd">            three numbers is given, these will be interpreted as [A, n,E] in</span>
<span class="sd">            the modified Arrhenius function.</span>
<span class="sd">        :param sticking_prob:</span>
<span class="sd">            The reactive sticking probability for the forward direction. This</span>
<span class="sd">            can only be specified if there is only one bulk-phase reactant and</span>
<span class="sd">            it belongs to an ideal gas phase. If a sequence of three numbers is</span>
<span class="sd">            given, these will be interpreted as [A, n,E] in the modified</span>
<span class="sd">            Arrhenius function.</span>
<span class="sd">        :param id:</span>
<span class="sd">            An optional identification string. If omitted, it defaults to a</span>
<span class="sd">            four-digit numeric string beginning with 0001 for the first</span>
<span class="sd">            reaction in the file.</span>
<span class="sd">        :param options:</span>
<span class="sd">            Processing options, as described in :ref:`sec-phase-options`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="n">kf</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;surface&#39;</span>

</div>
<div class="viewcode-block" id="edge_reaction"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.edge_reaction">[docs]</a><span class="k">class</span> <span class="nc">edge_reaction</span><span class="p">(</span><span class="n">reaction</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">equation</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">kf</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="nb">id</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">order</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">beta</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="n">reaction</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equation</span><span class="p">,</span> <span class="n">kf</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;edge&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_beta</span> <span class="o">=</span> <span class="n">beta</span>


<span class="c">#--------------</span>

</div>
<div class="viewcode-block" id="state"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.state">[docs]</a><span class="k">class</span> <span class="nc">state</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An embedded entry that specifies the thermodynamic state of a phase</span>
<span class="sd">    or interface.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">temperature</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">pressure</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">mole_fractions</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">mass_fractions</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">density</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">coverages</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">solute_molalities</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param temperature:</span>
<span class="sd">            The temperature.</span>
<span class="sd">        :param pressure:</span>
<span class="sd">            The pressure.</span>
<span class="sd">        :param density:</span>
<span class="sd">            The density. Cannot be specified if the phase is incompressible.</span>
<span class="sd">        :param mole_fractions:</span>
<span class="sd">            A string specifying the species mole fractions. Unspecified species</span>
<span class="sd">            are set to zero.</span>
<span class="sd">        :param mass_fractions:</span>
<span class="sd">            A string specifying the species mass fractions. Unspecified species</span>
<span class="sd">            are set to zero.</span>
<span class="sd">        :param coverages:</span>
<span class="sd">            A string specifying the species coverages. Unspecified species are</span>
<span class="sd">            set to zero. Can only be specified for interfaces.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t</span> <span class="o">=</span> <span class="n">temperature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_p</span> <span class="o">=</span> <span class="n">pressure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rho</span> <span class="o">=</span> <span class="n">density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">mole_fractions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">mass_fractions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="n">coverages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_m</span> <span class="o">=</span> <span class="n">solute_molalities</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ph</span><span class="p">):</span>
        <span class="n">st</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;state&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">:</span> <span class="n">addFloat</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="s">&#39;temperature&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="s">&#39;K&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">:</span> <span class="n">addFloat</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="s">&#39;pressure&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_p</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_upres</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rho</span><span class="p">:</span> <span class="n">addFloat</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rho</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">:</span> <span class="n">st</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;moleFractions&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">:</span> <span class="n">st</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;massFractions&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">:</span> <span class="n">st</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;coverages&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m</span><span class="p">:</span> <span class="n">st</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;soluteMolalities&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_m</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="phase"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.phase">[docs]</a><span class="k">class</span> <span class="nc">phase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for phases of matter.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">dim</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">reactions</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param name:</span>
<span class="sd">            A string to identify the phase. Must be unique among the phase</span>
<span class="sd">            names within the file.</span>
<span class="sd">        :param elements:</span>
<span class="sd">            The elements. A string of element symbols.</span>
<span class="sd">        :param species:</span>
<span class="sd">            The species. A string or sequence of strings in the format</span>
<span class="sd">            described in :ref:`sec-defining-species`.</span>
<span class="sd">        :param reactions:</span>
<span class="sd">            The homogeneous reactions. If omitted, no reactions will be</span>
<span class="sd">            included. A string or sequence of strings in the format described</span>
<span class="sd">            in :ref:`sec-declaring-reactions`. This field is not allowed for</span>
<span class="sd">            stoichiometric_solid and stoichiometric_liquid entries.</span>
<span class="sd">        :param kinetics:</span>
<span class="sd">            The kinetics model. Optional; if omitted, the default model for the</span>
<span class="sd">            phase type will be used.</span>
<span class="sd">        :param transport:</span>
<span class="sd">            The transport property model. Optional. If omitted, transport</span>
<span class="sd">            property calculation will be disabled.</span>
<span class="sd">        :param initial_state:</span>
<span class="sd">            Initial thermodynamic state, specified with an embedded state entry.</span>
<span class="sd">        :param options:</span>
<span class="sd">            Special processing options. Optional.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dim</span> <span class="o">=</span> <span class="n">dim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_el</span> <span class="o">=</span> <span class="n">elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rx</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_options</span> <span class="o">=</span> <span class="n">options</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="s">&#39;debug&#39;</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c">#--------------------------------</span>
        <span class="c">#        process species</span>
        <span class="c">#--------------------------------</span>

        <span class="c"># if a single string is entered, make it a list</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="p">[</span><span class="n">species</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="n">species</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_skip</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># dictionary of species names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># for each species string, check whether or not the species</span>
        <span class="c"># are imported or defined locally. If imported, the string</span>
        <span class="c"># contains a colon (:)</span>
        <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_species</span><span class="p">:</span>
            <span class="n">icolon</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">icolon</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c">#datasrc, spnames = sp.split(&#39;:&#39;)</span>
                <span class="n">datasrc</span> <span class="o">=</span> <span class="n">sp</span><span class="p">[:</span><span class="n">icolon</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">spnames</span> <span class="o">=</span> <span class="n">sp</span><span class="p">[</span><span class="n">icolon</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_sp</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">datasrc</span><span class="o">+</span><span class="s">&#39;.xml&#39;</span><span class="p">,</span> <span class="n">spnames</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">spnames</span> <span class="o">=</span> <span class="n">sp</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_sp</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">spnames</span><span class="p">))</span>

            <span class="c"># strip the commas, and make the list of species names</span>
            <span class="c"># 10/31/03: commented out the next line, so that species names may contain commas</span>
            <span class="c">#sptoks = spnames.replace(&#39;,&#39;,&#39; &#39;).split()</span>
            <span class="n">sptoks</span> <span class="o">=</span> <span class="n">spnames</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sptoks</span><span class="p">:</span>
                <span class="c"># check for stray commas</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="s">&#39;,&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span><span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span><span class="p">:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">s</span> <span class="o">!=</span> <span class="s">&#39;all&#39;</span> <span class="ow">and</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;Multiply-declared species &#39;</span><span class="o">+</span><span class="n">s</span><span class="o">+</span><span class="s">&#39; in phase &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dim</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rxns</span> <span class="o">=</span> <span class="n">reactions</span>

        <span class="c"># check that species have been declared</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;No species declared for phase &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>

        <span class="c"># and that only one species is declared if it is a pure phase</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_pure</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;Stoichiometric phases must  declare exactly one species, </span><span class="se">\n</span><span class="s">&#39;</span><span class="o">+</span>
                               <span class="s">&#39;but phase &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">+</span><span class="s">&#39; declares &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span><span class="p">))</span><span class="o">+</span><span class="s">&#39;.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_initial</span> <span class="o">=</span> <span class="n">initial_state</span>

        <span class="c"># add this phase to the global phase list</span>
        <span class="k">global</span> <span class="n">_phases</span>
        <span class="n">_phases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">is_ideal_gas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;True if the entry represents an ideal gas.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">is_pure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">has_species</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return 1 is a species with name &#39;s&#39; belongs to the phase,</span>
<span class="sd">        or 0 otherwise.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spmap</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Concentration dimensions. Used in computing the units for reaction</span>
<span class="sd">        rate coefficients.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_dim</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">buildrxns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_rxns</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_rxns</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_rxns</span><span class="p">]</span>

        <span class="c"># for each reaction string, check whether or not the reactions</span>
        <span class="c"># are imported or defined locally. If imported, the string</span>
        <span class="c"># contains a colon (:)</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rxns</span><span class="p">:</span>
            <span class="n">icolon</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">icolon</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c">#datasrc, rnum = r.split(&#39;:&#39;)</span>
                <span class="n">datasrc</span> <span class="o">=</span> <span class="n">r</span><span class="p">[:</span><span class="n">icolon</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">rnum</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="n">icolon</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rx</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">datasrc</span><span class="o">+</span><span class="s">&#39;.xml&#39;</span><span class="p">,</span> <span class="n">rnum</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rnum</span> <span class="o">=</span> <span class="n">r</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_rx</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">rnum</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rx</span><span class="p">:</span>
            <span class="n">datasrc</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">ra</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;reactionArray&#39;</span><span class="p">)</span>
            <span class="n">ra</span><span class="p">[</span><span class="s">&#39;datasrc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datasrc</span><span class="o">+</span><span class="s">&#39;#reaction_data&#39;</span>
            <span class="n">rk</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="s">&#39;skip_undeclared_species&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span>
                <span class="n">rk</span> <span class="o">=</span> <span class="n">ra</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;skip&#39;</span><span class="p">)</span>
                <span class="n">rk</span><span class="p">[</span><span class="s">&#39;species&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;undeclared&#39;</span>

            <span class="k">if</span> <span class="s">&#39;skip_undeclared_third_bodies&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">rk</span><span class="p">:</span>
                    <span class="n">rk</span> <span class="o">=</span> <span class="n">ra</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;skip&#39;</span><span class="p">)</span>
                <span class="n">rk</span><span class="p">[</span><span class="s">&#39;third_bodies&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;undeclared&#39;</span>

            <span class="n">rtoks</span> <span class="o">=</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">rtoks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&#39;all&#39;</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">ra</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;include&#39;</span><span class="p">)</span>
                <span class="c">#i[&#39;prefix&#39;] = &#39;reaction_&#39;</span>
                <span class="n">i</span><span class="p">[</span><span class="s">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rtoks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rtoks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="n">rtoks</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;to&#39;</span> <span class="ow">or</span> <span class="n">rtoks</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;-&#39;</span><span class="p">):</span>
                    <span class="n">i</span><span class="p">[</span><span class="s">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rtoks</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">i</span><span class="p">[</span><span class="s">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rtoks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>


    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">addComment</span><span class="p">(</span><span class="s">&#39;    phase &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="o">+</span><span class="s">&#39;     &#39;</span><span class="p">)</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;phase&#39;</span><span class="p">)</span>
        <span class="n">ph</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
        <span class="n">ph</span><span class="p">[</span><span class="s">&#39;dim&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dim</span><span class="p">)</span>

        <span class="c"># ------- error tests -------</span>
        <span class="c">#err = ph.addChild(&#39;validation&#39;)</span>
        <span class="c">#err.addChild(&#39;duplicateReactions&#39;,&#39;halt&#39;)</span>
        <span class="c">#err.addChild(&#39;thermo&#39;,&#39;warn&#39;)</span>

        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;elementArray&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_el</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;datasrc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;elements.xml&#39;</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sp</span><span class="p">:</span>
            <span class="n">datasrc</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="n">s</span>
            <span class="n">sa</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;speciesArray&#39;</span><span class="p">,</span><span class="n">names</span><span class="p">)</span>
            <span class="n">sa</span><span class="p">[</span><span class="s">&#39;datasrc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datasrc</span><span class="o">+</span><span class="s">&#39;#species_data&#39;</span>

            <span class="k">if</span> <span class="s">&#39;skip_undeclared_elements&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_options</span><span class="p">:</span>
                <span class="n">sk</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;skip&#39;</span><span class="p">)</span>
                <span class="n">sk</span><span class="p">[</span><span class="s">&#39;element&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;undeclared&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rxns</span> <span class="o">!=</span> <span class="s">&#39;none&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buildrxns</span><span class="p">(</span><span class="n">ph</span><span class="p">)</span>

        <span class="c">#self._eos.build(ph)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_initial</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">ph</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ph</span>

</div>
<div class="viewcode-block" id="ideal_gas"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.ideal_gas">[docs]</a><span class="k">class</span> <span class="nc">ideal_gas</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An ideal gas mixture.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">reactions</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                 <span class="n">kinetics</span> <span class="o">=</span> <span class="s">&#39;GasKinetics&#39;</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The parameters correspond to those of :class:`.phase`, with the</span>
<span class="sd">        following modifications:</span>

<span class="sd">        :param kinetics:</span>
<span class="sd">            The kinetics model. Usually this field is omitted, in which case</span>
<span class="sd">            kinetics model GasKinetics, appropriate for reactions in ideal gas</span>
<span class="sd">            mixtures, is used.</span>
<span class="sd">        :param transport:</span>
<span class="sd">            The transport property model. One of the strings ``&#39;none&#39;``,</span>
<span class="sd">            ``&#39;multi&#39;``, or ``&#39;mix&#39;``. Default: ``&#39;none&#39;``.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="n">reactions</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kin</span> <span class="o">=</span> <span class="n">kinetics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Read ideal_gas entry &#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;in file &#39;</span><span class="o">+</span><span class="n">__name__</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>



    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;IdealGas&#39;</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kin</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
        <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>

    <span class="k">def</span> <span class="nf">is_ideal_gas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span>

</div>
<div class="viewcode-block" id="stoichiometric_solid"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.stoichiometric_solid">[docs]</a><span class="k">class</span> <span class="nc">stoichiometric_solid</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A solid compound or pure element. Stoichiometric solid phases contain</span>
<span class="sd">    exactly one species, which always has unit activity. The solid is assumed</span>
<span class="sd">    to have constant density. Therefore the rates of reactions involving these</span>
<span class="sd">    phases do not contain any concentration terms for the (one) species in the</span>
<span class="sd">    phase, since the concentration is always the same.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">density</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :class:`.phase` for descriptions of the parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span> <span class="o">=</span> <span class="n">density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;density must be specified.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A stoichiometric solid always has unit activity, so the</span>
<span class="sd">        generalized concentration is 1 (dimensionless).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;StoichSubstance&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>

</div>
<div class="viewcode-block" id="stoichiometric_liquid"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.stoichiometric_liquid">[docs]</a><span class="k">class</span> <span class="nc">stoichiometric_liquid</span><span class="p">(</span><span class="n">stoichiometric_solid</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An incompressible stoichiometric liquid. Currently, there is no</span>
<span class="sd">    distinction between stoichiometric liquids and solids.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">density</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See :class:`.phase` for descriptions of the parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stoichiometric_solid</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span>
                                      <span class="n">species</span><span class="p">,</span> <span class="n">density</span><span class="p">,</span> <span class="n">transport</span><span class="p">,</span>
                                      <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="metal"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.metal">[docs]</a><span class="k">class</span> <span class="nc">metal</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A metal.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">density</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span> <span class="o">=</span> <span class="n">density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Metal&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>
</div>
<div class="viewcode-block" id="semiconductor"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.semiconductor">[docs]</a><span class="k">class</span> <span class="nc">semiconductor</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A semiconductor.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">density</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">bandgap</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">eV</span><span class="p">,</span>
                 <span class="n">effectiveMass_e</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">ElectronMass</span><span class="p">,</span>
                 <span class="n">effectiveMass_h</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">ElectronMass</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span> <span class="o">=</span> <span class="n">density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_emass</span> <span class="o">=</span> <span class="n">effectiveMass_e</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hmass</span> <span class="o">=</span> <span class="n">effectiveMass_h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bandgap</span> <span class="o">=</span> <span class="n">bandgap</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Semiconductor&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;effectiveMass_e&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_emass</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;effectiveMass_h&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hmass</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;bandgap&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bandgap</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="s">&#39;eV&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>

</div>
<div class="viewcode-block" id="incompressible_solid"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.incompressible_solid">[docs]</a><span class="k">class</span> <span class="nc">incompressible_solid</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An incompressible solid.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">density</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span> <span class="o">=</span> <span class="n">density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;density must be specified.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Incompressible&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dens</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>

</div>
<div class="viewcode-block" id="lattice"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.lattice">[docs]</a><span class="k">class</span> <span class="nc">lattice</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">reactions</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[],</span>
                 <span class="n">site_density</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">vacancy_species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">):</span>
        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                        <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="n">site_density</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vac</span> <span class="o">=</span> <span class="n">vacancy_species</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_species</span> <span class="o">=</span> <span class="n">species</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;sublattice name must be specified&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">species</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;sublattice species must be specified&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">site_density</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;sublattice &#39;</span><span class="o">+</span><span class="n">name</span>
                            <span class="o">+</span><span class="s">&#39; site density must be specified&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span> <span class="n">visible</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="c">#if visible == 0:</span>
        <span class="c">#    return</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;thermo&#39;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Lattice&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;site_density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_n</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umol</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vac</span><span class="p">:</span>
            <span class="n">e</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;vacancy_species&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_vac</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>
</div>
<div class="viewcode-block" id="lattice_solid"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.lattice_solid">[docs]</a><span class="k">class</span> <span class="nc">lattice_solid</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A solid crystal consisting of one or more sublattices.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">lattices</span> <span class="o">=</span> <span class="p">[],</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="c"># find elements</span>
        <span class="n">elist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">lat</span> <span class="ow">in</span> <span class="n">lattices</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">lat</span><span class="o">.</span><span class="n">_el</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">elist</span><span class="p">:</span>
                    <span class="n">elist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elist</span><span class="p">)</span>

        <span class="c"># find species</span>
        <span class="n">slist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">lat</span> <span class="ow">in</span> <span class="n">lattices</span><span class="p">:</span>
            <span class="n">_sp</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">spp</span> <span class="ow">in</span> <span class="n">lat</span><span class="o">.</span><span class="n">_species</span><span class="p">:</span>
                <span class="n">_sp</span> <span class="o">=</span> <span class="n">_sp</span> <span class="o">+</span> <span class="n">spp</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">_sp</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">sp</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">:</span>
                    <span class="n">slist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
        <span class="n">species</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">slist</span><span class="p">)</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lattices</span> <span class="o">=</span> <span class="n">lattices</span>
        <span class="k">if</span> <span class="n">lattices</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="k">raise</span> <span class="n">CTI_Error</span><span class="p">(</span><span class="s">&#39;One or more sublattices must be specified.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;LatticeSolid&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lattices</span><span class="p">:</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;LatticeArray&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lattices</span><span class="p">:</span>
                <span class="n">n</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">visible</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>


</div>
<div class="viewcode-block" id="liquid_vapor"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.liquid_vapor">[docs]</a><span class="k">class</span> <span class="nc">liquid_vapor</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A fluid with a complete liquid/vapor equation of state.</span>
<span class="sd">    This entry type selects one of a set of predefined fluids with</span>
<span class="sd">    built-in liquid/vapor equations of state. The substance_flag</span>
<span class="sd">    parameter selects the fluid. See purefluids.py for the usage</span>
<span class="sd">    of this entry type.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">substance_flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subflag</span> <span class="o">=</span> <span class="n">substance_flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">1</span>


    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;PureFluid&#39;</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;fluid_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_subflag</span><span class="p">)</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>
</div>
<span class="k">class</span> <span class="nc">RedlichKwongMFTP</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A multi-component fluid model for non-ideal gas fluids.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">activity_coefficients</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span><span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_activityCoefficients</span> <span class="o">=</span> <span class="n">activity_coefficients</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;RedlichKwongMFTP&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_activityCoefficients</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;activityCoefficients&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_activityCoefficients</span><span class="p">,</span> <span class="n">activityCoefficients</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_activityCoefficients</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_activityCoefficients</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_activityCoefficients</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
            <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>


<div class="viewcode-block" id="redlich_kwong"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.redlich_kwong">[docs]</a><span class="k">class</span> <span class="nc">redlich_kwong</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A fluid with a complete liquid/vapor equation of state.</span>
<span class="sd">    This entry type selects one of a set of predefined fluids with</span>
<span class="sd">    built-in liquid/vapor equations of state. The substance_flag</span>
<span class="sd">    parameter selects the fluid. See purefluids.py for the usage</span>
<span class="sd">    of this entry type.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">substance_flag</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">Tcrit</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">Pcrit</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_subflag</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tc</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pc</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;PureFluid&#39;</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;fluid_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_subflag</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;Tc&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tc</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="s">&quot;K&quot;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;Pc&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pc</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="s">&quot;Pa&quot;</span><span class="p">)</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;MolWt&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mw</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umass</span><span class="o">+</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">_umol</span><span class="p">)</span>
        <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span>


</div>
<div class="viewcode-block" id="ideal_interface"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.ideal_interface">[docs]</a><span class="k">class</span> <span class="nc">ideal_interface</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A chemically-reacting ideal surface solution of multiple species.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">reactions</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                 <span class="n">site_density</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">phases</span> <span class="o">=</span> <span class="p">[],</span>
                 <span class="n">kinetics</span> <span class="o">=</span> <span class="s">&#39;Interface&#39;</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The parameters correspond to those of :class:`.phase`, with the</span>
<span class="sd">        following modifications:</span>

<span class="sd">        :param reactions:</span>
<span class="sd">            The heterogeneous reactions at this interface. If omitted, no</span>
<span class="sd">            reactions will be included. A string or sequence of strings in the</span>
<span class="sd">            format described in :ref:`sec-declaring-reactions`.</span>
<span class="sd">        :param site_density:</span>
<span class="sd">            The number of adsorption sites per unit area.</span>
<span class="sd">        :param phases:</span>
<span class="sd">            A string listing the bulk phases that participate in reactions</span>
<span class="sd">            at this interface.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;surface&#39;</span>
        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="n">reactions</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kin</span> <span class="o">=</span> <span class="n">kinetics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="n">phases</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sitedens</span> <span class="o">=</span> <span class="n">site_density</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Surface&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;site_density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sitedens</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umol</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="o">+</span><span class="s">&#39;2&#39;</span><span class="p">)</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kin</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
        <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;phaseArray&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_phases</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="edge"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.edge">[docs]</a><span class="k">class</span> <span class="nc">edge</span><span class="p">(</span><span class="n">phase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A 1D boundary between two surface phases.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">elements</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">species</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">reactions</span> <span class="o">=</span> <span class="s">&#39;none&#39;</span><span class="p">,</span>
                 <span class="n">site_density</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">phases</span> <span class="o">=</span> <span class="p">[],</span>
                 <span class="n">kinetics</span> <span class="o">=</span> <span class="s">&#39;Edge&#39;</span><span class="p">,</span>
                 <span class="n">transport</span> <span class="o">=</span> <span class="s">&#39;None&#39;</span><span class="p">,</span>
                 <span class="n">initial_state</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                 <span class="n">options</span> <span class="o">=</span> <span class="p">[]):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="s">&#39;edge&#39;</span>
        <span class="n">phase</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">species</span><span class="p">,</span> <span class="n">reactions</span><span class="p">,</span>
                       <span class="n">initial_state</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pure</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kin</span> <span class="o">=</span> <span class="n">kinetics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span> <span class="o">=</span> <span class="n">transport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phases</span> <span class="o">=</span> <span class="n">phases</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sitedens</span> <span class="o">=</span> <span class="n">site_density</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">ph</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;thermo&quot;</span><span class="p">)</span>
        <span class="n">e</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Edge&#39;</span>
        <span class="n">addFloat</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s">&#39;site_density&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sitedens</span><span class="p">,</span> <span class="n">defunits</span> <span class="o">=</span> <span class="n">_umol</span><span class="o">+</span><span class="s">&#39;/&#39;</span><span class="o">+</span><span class="n">_ulen</span><span class="p">)</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&quot;kinetics&quot;</span><span class="p">)</span>
        <span class="n">k</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kin</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;transport&#39;</span><span class="p">)</span>
        <span class="n">t</span><span class="p">[</span><span class="s">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tr</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">ph</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;phaseArray&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_phases</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">conc_dim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>


<span class="c">## class binary_salt_parameters:</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  cation = &quot;&quot;,</span>
<span class="c">##                  anion = &quot;&quot;,</span>
<span class="c">##                  beta0 = None,</span>
<span class="c">##                  beta1 = None,</span>
<span class="c">##                  beta2 = None,</span>
<span class="c">##                  Cphi = None,</span>
<span class="c">##                  Alpha1 = -1.0):</span>
<span class="c">##         self._cation = cation</span>
<span class="c">##         self._anion = anion</span>
<span class="c">##         self._beta0 = beta0</span>
<span class="c">##         self._beta1 = beta1</span>
<span class="c">##         self._Cphi = Cphi</span>
<span class="c">##         self._Alpha1 = Alpha1</span>

<span class="c">##     def build(self, a):</span>
<span class="c">##         s = a.addChild(&quot;binarySaltParameters&quot;)</span>
<span class="c">##         s[&quot;cation&quot;] = self._cation</span>
<span class="c">##         s[&quot;anion&quot;] = self._anion</span>
<span class="c">##         s.addChild(&quot;beta0&quot;, self._beta0)</span>
<span class="c">##         s.addChild(&quot;beta1&quot;, self._beta1)</span>
<span class="c">##         s.addChild(&quot;beta2&quot;, self._beta2)</span>
<span class="c">##         s.addChild(&quot;Cphi&quot;, self._Cphi)</span>
<span class="c">##         s.addChild(&quot;Alpha1&quot;, self._Alpha1)</span>

<span class="c">## class theta_anion:</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  anions = None,</span>
<span class="c">##                  theta = 0.0):</span>
<span class="c">##         self._anions = anions</span>
<span class="c">##         self._theta = theta</span>

<span class="c">##     def build(self, a):</span>
<span class="c">##         s = a.addChild(&quot;thetaAnion&quot;)</span>
<span class="c">##         s[&quot;anion1&quot;] = self._anions[0]</span>
<span class="c">##         s[&quot;anion2&quot;] = self._anions[1]</span>
<span class="c">##         s.addChild(&quot;Theta&quot;, self._theta)</span>

<span class="c">## class psi_common_cation:</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  anions = None,</span>
<span class="c">##                  cation = &#39;&#39;,</span>
<span class="c">##                  theta = 0.0,</span>
<span class="c">##                  psi = 0.0):</span>
<span class="c">##         self._anions = anions</span>
<span class="c">##         self._cation = cation</span>
<span class="c">##         self._theta = theta</span>
<span class="c">##         self._psi = psi</span>

<span class="c">##     def build(self, a):</span>
<span class="c">##         s = a.addChild(&quot;psiCommonCation&quot;)</span>
<span class="c">##         s[&quot;anion1&quot;] = self._anions[0]</span>
<span class="c">##         s[&quot;anion2&quot;] = self._anions[1]</span>
<span class="c">##         s[&quot;cation&quot;] = self._cation</span>
<span class="c">##         s.addChild(&quot;Theta&quot;, self._theta)</span>
<span class="c">##         s.addChild(&quot;Psi&quot;, self._psi)</span>

<span class="c">## class psi_common_anion:</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  anion = &#39;&#39;,</span>
<span class="c">##                  cations = None,</span>
<span class="c">##                  theta = 0.0,</span>
<span class="c">##                  psi = 0.0):</span>
<span class="c">##         self._anion = anion</span>
<span class="c">##         self._cations = cations</span>
<span class="c">##         self._theta = theta</span>
<span class="c">##         self._psi = psi</span>

<span class="c">##     def build(self, a):</span>
<span class="c">##         s = a.addChild(&quot;psiCommonAnion&quot;)</span>
<span class="c">##         s[&quot;anion1&quot;] = self._cations[0]</span>
<span class="c">##         s[&quot;anion2&quot;] = self._cations[1]</span>
<span class="c">##         s[&quot;cation&quot;] = self._anion</span>
<span class="c">##         s.addChild(&quot;Theta&quot;, self._theta)</span>
<span class="c">##         s.addChild(&quot;Psi&quot;, self._psi)</span>


<span class="c">## class theta_cation:</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  cations = None,</span>
<span class="c">##                  theta = 0.0):</span>
<span class="c">##         self._cations = cations</span>
<span class="c">##         self._theta = theta</span>

<span class="c">##     def build(self, a):</span>
<span class="c">##         s = a.addChild(&quot;thetaCation&quot;)</span>
<span class="c">##         s[&quot;cation1&quot;] = self._anions[0]</span>
<span class="c">##         s[&quot;cation2&quot;] = self._anions[1]</span>
<span class="c">##         s.addChild(&quot;Theta&quot;, self._theta)</span>

<span class="c">## class pitzer:</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  temp_model = &quot;&quot;,</span>
<span class="c">##                  A_Debye = &quot;&quot;,</span>
<span class="c">##                  default_ionic_radius = -1.0,</span>

<span class="c">## class electrolyte(phase):</span>
<span class="c">##     &quot;&quot;&quot;An electrolye solution obeying the HMW model.&quot;&quot;&quot;</span>
<span class="c">##     def __init__(self,</span>
<span class="c">##                  name = &#39;&#39;,</span>
<span class="c">##                  elements = &#39;&#39;,</span>
<span class="c">##                  species = &#39;&#39;,</span>
<span class="c">##                  transport = &#39;None&#39;,</span>
<span class="c">##                  initial_state = None,</span>
<span class="c">##                  solvent = &#39;&#39;,</span>
<span class="c">##                  standard_concentration = &#39;&#39;,</span>
<span class="c">##                  activity_coefficients = None,</span>
<span class="c">##                  options = []):</span>

<span class="c">##         phase.__init__(self, name, 3, elements, species, &#39;none&#39;,</span>
<span class="c">##                        initial_state, options)</span>
<span class="c">##         self._pure = 0</span>
<span class="c">##         self._solvent = solvent</span>
<span class="c">##         self._stdconc = standard_concentration</span>

<span class="c">##     def conc_dim(self):</span>
<span class="c">##         return (1,-3)</span>

<span class="c">##     def build(self, p):</span>
<span class="c">##         ph = phase.build(self, p)</span>
<span class="c">##         e = ph.addChild(&quot;thermo&quot;)</span>
<span class="c">##         sc = e.addChild(&quot;standardConc&quot;)</span>
<span class="c">##         sc[&#39;model&#39;] = self._stdconc</span>
<span class="c">##         e[&#39;model&#39;] = &#39;HMW&#39;</span>
<span class="c">##         e.addChild(&quot;activity_coefficients&quot;)</span>

<span class="c">##         addFloat(e, &#39;density&#39;, self._dens, defunits = _umass+&#39;/&#39;+_ulen+&#39;3&#39;)</span>
<span class="c">##         if self._tr:</span>
<span class="c">##             t = ph.addChild(&#39;transport&#39;)</span>
<span class="c">##             t[&#39;model&#39;] = self._tr</span>
<span class="c">##         k = ph.addChild(&quot;kinetics&quot;)</span>
<span class="c">##         k[&#39;model&#39;] = &#39;none&#39;</span>


<span class="c">#-------------------------------------------------------------------</span>

<span class="c"># falloff parameterizations</span>
</div>
<div class="viewcode-block" id="Troe"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.Troe">[docs]</a><span class="k">class</span> <span class="nc">Troe</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The Troe falloff function.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">T3</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">T1</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">T2</span> <span class="o">=</span> <span class="o">-</span><span class="mf">999.9</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: *A*, *T3*, *T1*, *T2*. These must be entered as pure</span>
<span class="sd">        numbers with no attached dimensions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">T2</span> <span class="o">!=</span> <span class="o">-</span><span class="mf">999.9</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%g</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="n">num</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;falloff&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">f</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Troe&#39;</span>

</div>
<div class="viewcode-block" id="SRI"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.SRI">[docs]</a><span class="k">class</span> <span class="nc">SRI</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; The SRI falloff function.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="o">-</span><span class="mf">999.9</span><span class="p">,</span> <span class="n">E</span><span class="o">=-</span><span class="mf">999.9</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: *A*, *B*, *C*, *D*, *E*. These must be entered as</span>
<span class="sd">        pure numbers without attached dimensions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">D</span> <span class="o">!=</span> <span class="o">-</span><span class="mf">999.9</span> <span class="ow">and</span> <span class="n">E</span> <span class="o">!=</span> <span class="o">-</span><span class="mf">999.9</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">E</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_c</span> <span class="o">=</span> <span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_c</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%g</span><span class="s"> &#39;</span> <span class="o">%</span> <span class="n">num</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;falloff&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
        <span class="n">f</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;SRI&#39;</span>

</div>
<div class="viewcode-block" id="Lindemann"><a class="viewcode-back" href="../cti/classes.html#ctml_writer.Lindemann">[docs]</a><span class="k">class</span> <span class="nc">Lindemann</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The Lindemann falloff function.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; This falloff function takes no parameters.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">addChild</span><span class="p">(</span><span class="s">&#39;falloff&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Lindemann&#39;</span>


<span class="c">#get_atomic_wts()</span></div>
<span class="n">validate</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">outName</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
    <span class="n">base</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">root</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
    <span class="n">dataset</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;rU&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">filename</span><span class="p">,</span> <span class="s">&#39;exec&#39;</span><span class="p">)</span>
            <span class="k">exec</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">SyntaxError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="c"># Show more context than the default SyntaxError message</span>
        <span class="c"># to help see problems in multi-line statements</span>
        <span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;rU&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> in &quot;</span><span class="si">%s</span><span class="s">&quot; on line </span><span class="si">%i</span><span class="s">:</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
                                            <span class="n">err</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
                                            <span class="n">err</span><span class="o">.</span><span class="n">lineno</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;|  Line |&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">lineno</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                       <span class="nb">min</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">lineno</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">))):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;| </span><span class="si">% 5i</span><span class="s"> |&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">err</span><span class="o">.</span><span class="n">lineno</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="o">*</span> <span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">offset</span><span class="o">+</span><span class="mi">9</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;^&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">traceback</span>

        <span class="n">text</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;rU&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">tb</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">extract_tb</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="n">tb</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> on line </span><span class="si">%i</span><span class="s"> of </span><span class="si">%s</span><span class="s">:&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">filename</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">| Line |&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">lineno</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                       <span class="nb">min</span><span class="p">(</span><span class="n">lineno</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">))):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">lineno</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;&gt; </span><span class="si">% 4i</span><span class="s"> &gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&#39;| </span><span class="si">% 4i</span><span class="s"> |&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">text</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>

        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="n">write</span><span class="p">(</span><span class="n">outName</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Incorrect number of command line arguments.&#39;</span><span class="p">)</span>
    <span class="n">convert</span><span class="p">(</span><span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">Cantera</a> &raquo;</li>
          <li><a href="index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Cantera Developers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>